/* =================================================================
   DARK MODE ENHANCEMENTS - Better Readability & Contrast
   ================================================================= */

/* CRITICAL: Override ALL white backgrounds in dark mode */
[data-theme='dark'] body {
  background-color: var(--background-color) !important;
  color: var(--text-color) !important;
}

/* Cards - Force dark background */
[data-theme='dark'] .card {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .card-body {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .card-footer {
  background-color: var(--light-gray) !important;
  color: var(--text-color) !important;
  border-top-color: var(--border-color) !important;
}

/* Alert Components - Dark Mode */
[data-theme='dark'] .alert-info {
  background-color: var(--alert-info-bg) !important;
  border-color: var(--alert-info-border) !important;
  color: var(--alert-info-text) !important;
}

[data-theme='dark'] .alert-warning {
  background-color: var(--alert-warning-bg) !important;
  border-color: var(--alert-warning-border) !important;
  color: var(--alert-warning-text) !important;
}

[data-theme='dark'] .alert-success {
  background-color: var(--alert-success-bg) !important;
  border-color: var(--alert-success-border) !important;
  color: var(--alert-success-text) !important;
}

[data-theme='dark'] .alert-danger {
  background-color: var(--alert-danger-bg) !important;
  border-color: var(--alert-danger-border) !important;
  color: var(--alert-danger-text) !important;
}

/* Text Colors - Enhanced Contrast */
[data-theme='dark'] .text-muted {
  color: var(--text-muted) !important;
}

[data-theme='dark'] .text-primary {
  color: #93c5fd !important;
}

[data-theme='dark'] .text-success {
  color: #86efac !important;
}

[data-theme='dark'] .text-info {
  color: #7dd3fc !important;
}

[data-theme='dark'] .text-warning {
  color: #fde047 !important;
}

[data-theme='dark'] .text-danger {
  color: #fca5a5 !important;
}

[data-theme='dark'] .text-secondary {
  color: #cbd5e1 !important;
}

[data-theme='dark'] .text-dark {
  color: #f1f5f9 !important;
}

/* Badge Components - Dark Mode */
[data-theme='dark'] .badge.bg-primary {
  background-color: #3b82f6 !important;
  color: #ffffff !important;
}

[data-theme='dark'] .badge.bg-success {
  background-color: #22c55e !important;
  color: #ffffff !important;
}

[data-theme='dark'] .badge.bg-info {
  background-color: #0ea5e9 !important;
  color: #ffffff !important;
}

[data-theme='dark'] .badge.bg-warning {
  background-color: #eab308 !important;
  color: #000000 !important;
}

[data-theme='dark'] .badge.bg-danger {
  background-color: #ef4444 !important;
  color: #ffffff !important;
}

[data-theme='dark'] .badge.bg-secondary {
  background-color: #64748b !important;
  color: #ffffff !important;
}

[data-theme='dark'] .badge.bg-light {
  background-color: #475569 !important;
  color: #f1f5f9 !important;
}

[data-theme='dark'] .badge.bg-dark {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
}

/* Form Controls - Better visibility */
[data-theme='dark'] .form-control,
[data-theme='dark'] .form-select {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .form-control:focus,
[data-theme='dark'] .form-select:focus {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 3px rgba(137, 180, 248, 0.25) !important;
}

[data-theme='dark'] .form-control::placeholder {
  color: #64748b !important;
}

[data-theme='dark'] .form-control:disabled,
[data-theme='dark'] .form-select:disabled {
  background-color: #0f172a !important;
  color: #64748b !important;
  opacity: 0.6;
}

/* Input Group */
[data-theme='dark'] .input-group-text {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
  border-color: var(--border-color) !important;
}

/* Table Enhancements */
[data-theme='dark'] .table {
  color: var(--text-color) !important;
  background-color: transparent !important;
}

[data-theme='dark'] .table td,
[data-theme='dark'] .table th {
  border-color: var(--border-color) !important;
  background-color: transparent !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .table thead th {
  background: linear-gradient(135deg, #1e3a5f 0%, #0f2744 100%) !important;
  color: #ffffff !important;
  border-color: rgba(123, 163, 224, 0.3) !important;
}

[data-theme='dark'] .table tbody tr {
  background-color: transparent !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .table-hover tbody tr:hover {
  background-color: var(--light-gray) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .table-bordered {
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .table-striped tbody tr:nth-of-type(odd) {
  background-color: rgba(255, 255, 255, 0.02) !important;
}

[data-theme='dark'] .table-striped tbody tr:nth-of-type(even) {
  background-color: transparent !important;
}

/* Progress Bars */
[data-theme='dark'] .progress {
  background-color: #1e293b !important;
}

[data-theme='dark'] .progress-bar {
  background-color: var(--primary-color) !important;
}

[data-theme='dark'] .progress-bar.bg-success {
  background-color: #22c55e !important;
}

[data-theme='dark'] .progress-bar.bg-danger {
  background-color: #ef4444 !important;
}

[data-theme='dark'] .progress-bar.bg-warning {
  background-color: #eab308 !important;
}

[data-theme='dark'] .progress-bar.bg-info {
  background-color: #0ea5e9 !important;
}

/* Spinner Colors */
[data-theme='dark'] .spinner-border {
  color: var(--primary-color) !important;
}

[data-theme='dark'] .spinner-border.text-primary {
  color: #93c5fd !important;
}

[data-theme='dark'] .spinner-border.text-success {
  color: #86efac !important;
}

[data-theme='dark'] .spinner-border.text-danger {
  color: #fca5a5 !important;
}

/* List Group */
[data-theme='dark'] .list-group-item {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .list-group-item:hover {
  background-color: var(--light-gray) !important;
}

[data-theme='dark'] .list-group-item.active {
  background-color: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
  color: #ffffff !important;
}

/* Breadcrumb */
[data-theme='dark'] .breadcrumb {
  background-color: transparent !important;
}

[data-theme='dark'] .breadcrumb-item,
[data-theme='dark'] .breadcrumb-item a {
  color: var(--gray) !important;
}

[data-theme='dark'] .breadcrumb-item.active {
  color: var(--primary-color) !important;
}

/* Pagination */
[data-theme='dark'] .pagination .page-link {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .pagination .page-link:hover {
  background-color: var(--light-gray) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .pagination .page-item.active .page-link {
  background-color: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
  color: #ffffff !important;
}

[data-theme='dark'] .pagination .page-item.disabled .page-link {
  background-color: var(--white) !important;
  color: #64748b !important;
  opacity: 0.5;
}

/* Dropdown Menu */
[data-theme='dark'] .dropdown-menu {
  background-color: var(--white) !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .dropdown-item {
  color: var(--text-color) !important;
}

[data-theme='dark'] .dropdown-item:hover,
[data-theme='dark'] .dropdown-item:focus {
  background-color: var(--primary-color-light) !important;
  color: var(--primary-color) !important;
}

[data-theme='dark'] .dropdown-divider {
  border-color: var(--border-color) !important;
}

/* Nav Tabs */
[data-theme='dark'] .nav-tabs {
  border-bottom-color: var(--border-color) !important;
}

[data-theme='dark'] .nav-tabs .nav-link {
  color: var(--text-color) !important;
  border-color: transparent !important;
}

[data-theme='dark'] .nav-tabs .nav-link:hover {
  border-color: var(--border-color) var(--border-color) transparent !important;
  color: var(--primary-color) !important;
}

[data-theme='dark'] .nav-tabs .nav-link.active {
  background-color: var(--white) !important;
  color: var(--primary-color) !important;
  border-color: var(--border-color) var(--border-color) var(--white) !important;
}

/* Nav Pills */
[data-theme='dark'] .nav-pills .nav-link {
  color: var(--text-color) !important;
}

[data-theme='dark'] .nav-pills .nav-link.active {
  background-color: var(--primary-color) !important;
  color: #ffffff !important;
}

/* Accordion */
[data-theme='dark'] .accordion-item {
  background-color: var(--white) !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .accordion-button {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .accordion-button:not(.collapsed) {
  background-color: var(--light-gray) !important;
  color: var(--primary-color) !important;
}

[data-theme='dark'] .accordion-button:focus {
  border-color: var(--border-color) !important;
  box-shadow: 0 0 0 0.25rem rgba(137, 180, 248, 0.25) !important;
}

[data-theme='dark'] .accordion-body {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
}

/* Tooltip */
[data-theme='dark'] .tooltip-inner {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
}

[data-theme='dark'] .bs-tooltip-top .tooltip-arrow::before,
[data-theme='dark'] .bs-tooltip-auto[data-popper-placement^="top"] .tooltip-arrow::before {
  border-top-color: #1e293b !important;
}

[data-theme='dark'] .bs-tooltip-end .tooltip-arrow::before,
[data-theme='dark'] .bs-tooltip-auto[data-popper-placement^="right"] .tooltip-arrow::before {
  border-right-color: #1e293b !important;
}

[data-theme='dark'] .bs-tooltip-bottom .tooltip-arrow::before,
[data-theme='dark'] .bs-tooltip-auto[data-popper-placement^="bottom"] .tooltip-arrow::before {
  border-bottom-color: #1e293b !important;
}

[data-theme='dark'] .bs-tooltip-start .tooltip-arrow::before,
[data-theme='dark'] .bs-tooltip-auto[data-popper-placement^="left"] .tooltip-arrow::before {
  border-left-color: #1e293b !important;
}

/* Popover */
[data-theme='dark'] .popover {
  background-color: #1e293b !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .popover-header {
  background-color: #0f172a !important;
  color: #f1f5f9 !important;
  border-bottom-color: var(--border-color) !important;
}

[data-theme='dark'] .popover-body {
  color: #f1f5f9 !important;
}

/* Toast */
[data-theme='dark'] .toast {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .toast-header {
  background-color: #0f172a !important;
  color: #f1f5f9 !important;
  border-bottom-color: var(--border-color) !important;
}

/* Close Button */
[data-theme='dark'] .btn-close {
  filter: invert(1) grayscale(100%) brightness(200%);
}

/* HR Divider */
[data-theme='dark'] hr {
  border-color: var(--border-color) !important;
  opacity: 1;
}

/* Small Text */
[data-theme='dark'] small,
[data-theme='dark'] .small {
  color: var(--text-muted) !important;
}

/* Headings in Dark Mode */
[data-theme='dark'] h1,
[data-theme='dark'] h2,
[data-theme='dark'] h3,
[data-theme='dark'] h4,
[data-theme='dark'] h5,
[data-theme='dark'] h6 {
  color: var(--dark-gray) !important;
}

/* Links */
[data-theme='dark'] a {
  color: var(--primary-color) !important;
}

[data-theme='dark'] a:hover {
  color: var(--primary-color-dark) !important;
}

/* Code & Pre */
[data-theme='dark'] code {
  background-color: #1e293b !important;
  color: #93c5fd !important;
}

[data-theme='dark'] pre {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
  border-color: var(--border-color) !important;
}

/* Blockquote */
[data-theme='dark'] blockquote {
  border-left-color: var(--border-color) !important;
  color: var(--text-muted) !important;
}

/* Offcanvas */
[data-theme='dark'] .offcanvas {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .offcanvas-header {
  border-bottom-color: var(--border-color) !important;
}

[data-theme='dark'] .offcanvas-footer {
  border-top-color: var(--border-color) !important;
}

/* React Toastify Dark Mode */
[data-theme='dark'] .Toastify__toast {
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
}

[data-theme='dark'] .Toastify__toast--success {
  background-color: #1e4a2e !important;
}

[data-theme='dark'] .Toastify__toast--error {
  background-color: #4a1e2e !important;
}

[data-theme='dark'] .Toastify__toast--warning {
  background-color: #4a3c1e !important;
}

[data-theme='dark'] .Toastify__toast--info {
  background-color: #1e3a5f !important;
}

[data-theme='dark'] .Toastify__progress-bar {
  background: linear-gradient(to right, var(--primary-color), var(--primary-color-dark)) !important;
}

/* Ensure all p, span, div inherit text color properly */
[data-theme='dark'] p,
[data-theme='dark'] span:not(.badge):not(.spinner-border),
[data-theme='dark'] div:not(.card):not(.modal-content):not(.dropdown-menu):not(.toast):not(.popover):not(.tooltip-inner):not(.alert):not(.progress):not(.spinner-border) {
  color: inherit;
}

/* Scrollbar Styling for Dark Mode */
[data-theme='dark'] ::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

[data-theme='dark'] ::-webkit-scrollbar-track {
  background: #0f172a;
}

[data-theme='dark'] ::-webkit-scrollbar-thumb {
  background: #334155;
  border-radius: 5px;
}

[data-theme='dark'] ::-webkit-scrollbar-thumb:hover {
  background: #475569;
}

/* Selection Color */
[data-theme='dark'] ::selection {
  background-color: rgba(137, 180, 248, 0.3);
  color: #f1f5f9;
}

/* AGGRESSIVE OVERRIDES for Dark Mode - Fix all white elements */

/* Override any remaining white backgrounds */
[data-theme='dark'] .bg-white {
  background-color: var(--white) !important;
}

[data-theme='dark'] .bg-light {
  background-color: var(--light-gray) !important;
}

[data-theme='dark'] .text-white {
  color: #ffffff !important;
}

/* Stats Cards */
[data-theme='dark'] .stats-card {
  background: var(--white) !important;
  color: var(--text-color) !important;
  border-color: var(--border-color) !important;
}

/* All divs with background */
[data-theme='dark'] div[class*="bg-"],
[data-theme='dark'] div[style*="background"] {
  color: var(--text-color) !important;
}

/* Table overrides */
[data-theme='dark'] .table-responsive {
  background-color: transparent !important;
}

[data-theme='dark'] tbody,
[data-theme='dark'] thead,
[data-theme='dark'] tfoot {
  background-color: transparent !important;
}

/* Fix any inline white backgrounds */
[data-theme='dark'] [style*="background: white"],
[data-theme='dark'] [style*="background: #fff"],
[data-theme='dark'] [style*="background-color: white"],
[data-theme='dark'] [style*="background-color: #fff"],
[data-theme='dark'] [style*="background-color: #ffffff"] {
  background-color: var(--white) !important;
}

/* Fix any inline white text colors */
[data-theme='dark'] [style*="color: #333"],
[data-theme='dark'] [style*="color: #000"],
[data-theme='dark'] [style*="color: black"],
[data-theme='dark'] [style*="color: #2d3748"] {
  color: var(--text-color) !important;
}

/* Containers and rows */
[data-theme='dark'] .container,
[data-theme='dark'] .container-fluid,
[data-theme='dark'] .row {
  background-color: transparent !important;
  color: var(--text-color) !important;
}

/* Content area */
[data-theme='dark'] .content-area {
  background-color: var(--background-color) !important;
  color: var(--text-color) !important;
}

/* Main content */
[data-theme='dark'] .main-content {
  background-color: var(--background-color) !important;
  color: var(--text-color) !important;
}

/* Dashboard specific overrides */
[data-theme='dark'] .dashboard-container {
  background-color: var(--background-color) !important;
  color: var(--text-color) !important;
}

/* Override Bootstrap default backgrounds */
[data-theme='dark'] .bg-body {
  background-color: var(--background-color) !important;
}

[data-theme='dark'] .bg-body-secondary {
  background-color: var(--light-gray) !important;
}

[data-theme='dark'] .bg-body-tertiary {
  background-color: var(--white) !important;
}

/* Text color overrides for better readability */
[data-theme='dark'] .text-body {
  color: var(--text-color) !important;
}

[data-theme='dark'] .text-body-secondary {
  color: var(--text-muted) !important;
}

/* Remove any box shadows that look bad in dark mode */
[data-theme='dark'] .shadow,
[data-theme='dark'] .shadow-sm,
[data-theme='dark'] .shadow-lg {
  box-shadow: var(--shadow-lg) !important;
}

/* Border colors */
[data-theme='dark'] .border {
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .border-top {
  border-top-color: var(--border-color) !important;
}

[data-theme='dark'] .border-bottom {
  border-bottom-color: var(--border-color) !important;
}

[data-theme='dark'] .border-start {
  border-left-color: var(--border-color) !important;
}

[data-theme='dark'] .border-end {
  border-right-color: var(--border-color) !important;
}

/* Images - prevent bright white backgrounds */
[data-theme='dark'] img {
  opacity: 0.9;
}

[data-theme='dark'] img:hover {
  opacity: 1;
}

/* Strong and bold text */
[data-theme='dark'] strong,
[data-theme='dark'] b {
  color: var(--dark-gray) !important;
}

/* Ensure labels are visible */
[data-theme='dark'] label {
  color: var(--text-color) !important;
}

/* Legend in forms */
[data-theme='dark'] legend {
  color: var(--text-color) !important;
}

/* Fieldset */
[data-theme='dark'] fieldset {
  border-color: var(--border-color) !important;
}

/* Fix for any missed modals */
[data-theme='dark'] .modal-backdrop.show {
  opacity: 0.7 !important;
}

/* Dashboard specific cards */
[data-theme='dark'] .card.mb-4,
[data-theme='dark'] .card.mb-3,
[data-theme='dark'] .card.mb-2 {
  background-color: var(--white) !important;
  color: var(--text-color) !important;
}

/* Specific to education priority and other detailed pages */
[data-theme='dark'] .alert {
  border-width: 1px;
  border-style: solid;
}

/* Make sure all text in cards is readable */
[data-theme='dark'] .card p,
[data-theme='dark'] .card span,
[data-theme='dark'] .card div:not(.badge):not(.progress):not(.spinner-border) {
  color: var(--text-color) !important;
}

/* Fix for table in cards */
[data-theme='dark'] .card .table {
  color: var(--text-color) !important;
}

/* Override any gradients that still show white */
[data-theme='dark'] [style*="linear-gradient"] {
  background: var(--white) !important;
}

/* Avatar circles and badges in tables */
[data-theme='dark'] .avatar-circle {
  background-color: var(--primary-color) !important;
  color: #ffffff !important;
}

/* Ensure table-responsive doesn't have white background */
[data-theme='dark'] .table-responsive,
[data-theme='dark'] .table-wrapper {
  background-color: transparent !important;
}

/* Button groups in tables */
[data-theme='dark'] .btn-group .btn {
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .btn-outline-primary {
  color: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
  background-color: transparent !important;
}

[data-theme='dark'] .btn-outline-primary:hover {
  background-color: var(--primary-color) !important;
  color: #ffffff !important;
}

[data-theme='dark'] .btn-outline-warning {
  color: #fbbf24 !important;
  border-color: #fbbf24 !important;
  background-color: transparent !important;
}

[data-theme='dark'] .btn-outline-warning:hover {
  background-color: #fbbf24 !important;
  color: #000000 !important;
}

[data-theme='dark'] .btn-outline-danger {
  color: #f87171 !important;
  border-color: #f87171 !important;
  background-color: transparent !important;
}

[data-theme='dark'] .btn-outline-danger:hover {
  background-color: #f87171 !important;
  color: #ffffff !important;
}

[data-theme='dark'] .btn-outline-secondary {
  color: var(--gray) !important;
  border-color: var(--border-color) !important;
  background-color: transparent !important;
}

[data-theme='dark'] .btn-outline-secondary:hover {
  background-color: var(--light-gray) !important;
  color: var(--text-color) !important;
}

/* Fix any remaining white in filter cards */
[data-theme='dark'] .card.mb-4 .card-body,
[data-theme='dark'] .card.mb-3 .card-body,
[data-theme='dark'] .card.mb-2 .card-body {
  background-color: var(--white) !important;
}

/* Ensure all children of card-body inherit proper colors */
[data-theme='dark'] .card-body * {
  color: inherit;
}

[data-theme='dark'] .card-body .text-muted {
  color: var(--text-muted) !important;
}

/* Recommendation cards - section headers */
[data-theme='dark'] .recommendation-details h6 {
  color: #cbd5e1 !important;
}

/* Recommendation cards - school list box (light mode) */
.school-list-box {
  background-color: #f8f9fa;
  border-color: #dee2e6;
}

/* Recommendation cards - school list box (dark mode) */
[data-theme='dark'] .school-list-box {
  background-color: rgba(255, 255, 255, 0.05) !important;
  border-color: rgba(255, 255, 255, 0.1) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .school-list-box .text-muted,
[data-theme='dark'] .school-list-box li {
  color: #cbd5e1 !important;
}
